<html>
<head>
<title>fixtures.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #8a8a8a;}
.s1 { color: #cfd2d5;}
.s2 { color: #8ea765;}
.s3 { color: #cc7832; font-weight: bold;}
.s4 { color: #6897bb;}
.s5 { color: #cc7832;}
</style>
</head>
<body bgcolor="#1c1c1c">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
fixtures.js</font>
</center></td></tr></table>
<pre><span class="s0">/* eslint-env mocha */</span>
<span class="s2">'use strict'</span>

<span class="s3">var </span><span class="s1">assert = require(</span><span class="s2">'assert'</span><span class="s1">)</span>

<span class="s1">exports.port = </span><span class="s4">23433</span>

<span class="s1">exports.keys = {</span>
  <span class="s1">key: </span><span class="s2">'-----BEGIN RSA PRIVATE KEY-----</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'MIIEogIBAAKCAQEA1ARXSoyizYSnHDYickxX4x2UG/8uNWnQWKlWR97NAwRsspN6</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'aFF1+LnyN9bvLNnhxIowcYy68+LpZ7pYAQgBZSyAhnF1S4qz2w/rxH4CNn96B/je</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'vQGo3e8vIQ8ChhfuYvGAtTEYJzW8aRoxWSPcukZZdxPQ1Wgbhd9DSXhgkUnkEEET</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'owyn8ufQFRnQHfc9Fn5DrJilI7vD+ZyRU3gZoBj2GVMQuxJLqQEHy2XsJ6ZWTea/</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'EfK93XfDyY7ZxyeK0ZdWCVoTqw9QNJSkGjesCBkcY4Rjxi9LbLJwW3Es4wgW4N4Y</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'cltfygjltSis+RVKJyGeDqTWAxceih3mlkdGIQIDAQABAoIBAB6akc8dBdMMtuKH</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'nelJw9XwyxRPfWgQYhaqOt4c9xLcbKRKTX0JZTIGBUSyLcwXl1M7b0q0ubfCpVZn</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'u5RKh4kHJ3ZAomHJH7UbUzkFx2P+eqrz7ZLyzmFayT7IX+DjS3HU0nNVJttiElRJ</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'h54KYy4wQXHC1n43jOGCHMBaM/ZEpO3xA7PLfVD/BpYLzL+FAYoFBb/x2buLv8Mg</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'D6QAWkS70mu8ER13NapKjg6PUsYPxHYU30BjGMTXw95Iz5PSAK8+/xQ6YaW7MEVM</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'twxxfJfZ+9u9nJMfJANqxCi6iZ6ft/e5cbhvNhV/X97XeoPWxqSpx98M6BC/vvBc</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'UjSmaRECgYEA4NH8Y20zC8zF4ALcBgqgrx+U9upov2UGa+kjS1/So4r/dpG4T8pT</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'T2tMW6zR5qe7g11kgJm0oI/I6x9P2qwFJONO3MdLYVKd2mSxG2fniCktLg2j6BAX</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'QTt5zjIEWvhRP2vkrS8gAaJbVMLTMg4s374bE/IdKT+c59tYpcVaXXMCgYEA8WvJ</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'dfPXoagEgaHRd++R2COMG19euOTFRle0MSq+S9ZeeSe9ejb9CIpWYZ3WVviKvf+E</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'zksmKTZJnig5pGEgU+2ka1C9PthCGlTlQagD6Ey4hblQgi+pOFgBjE9Yn3FxfppH</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'25ICXNY89EF6klEqKV67E/5O+nBZo+Y2TM4YKRsCgYAaEV8RbEUB9kFvYwV+Eddl</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'1uSf6LgykRU4h/TWtYqn+eL7LZRQdCZKzCczbgt8kjBU4AxaOPhPsbxbPus0cMO7</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'7jtjsBwWcczp2MkMY3TePeAGOgCqVMtNfgb2mKgWoDpTf0ApsJAmgFvUrS5t3GTp</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'oJJlMqqc8MpRvAZAWmzK7wKBgEVBFlmvyXumJyTItr4hC0VlbRutEA8aET1Mi3RP</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'Pqeipxc6PzB/9bYtePonvQTV53b5ha9n/1pzKEsmXuK4uf1ZfoEKeD8+6jeDgwCC</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'ohxRZd12e5Hc+j4fgNIvMM0MTfJzb4mdKPBYxMOMxQyUG/QiKKhjm2RcNlq9/3Wo</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'6WVhAoGAG4QPWoE4ccFECp8eyGw8rjE45y5uqUI/f/RssX7bnKbCRY0otDsPlJd6</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'Kf0XFssLnYsCXO+ua03gw2N+2mrcsuA5FXHmQMrbfnuojHIVY05nt4Wa5iqV/gqH</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'PJXWyOgD+Kd6eR/cih/SCoKl4tSGCSJG5TDEpMt+r8EJkCXJ7Fw=</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
       <span class="s2">'-----END RSA PRIVATE KEY-----'</span><span class="s5">,</span>
  <span class="s1">cert: </span><span class="s2">'-----BEGIN CERTIFICATE-----</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
        <span class="s2">'MIICuTCCAaOgAwIBAgIDAQABMAsGCSqGSIb3DQEBCzAUMRIwEAYDVQQDFglub2Rl</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
        <span class="s2">'LnNwZHkwHhcNNjkwMTAxMDAwMDAwWhcNMjUwNzA2MDUwMzQzWjAUMRIwEAYDVQQD</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
        <span class="s2">'Fglub2RlLnNwZHkwggEgMAsGCSqGSIb3DQEBAQOCAQ8AMIIBCgKCAQEA1ARXSoyi</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
        <span class="s2">'zYSnHDYickxX4x2UG/8uNWnQWKlWR97NAwRsspN6aFF1+LnyN9bvLNnhxIowcYy6</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
        <span class="s2">'8+LpZ7pYAQgBZSyAhnF1S4qz2w/rxH4CNn96B/jevQGo3e8vIQ8ChhfuYvGAtTEY</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
        <span class="s2">'JzW8aRoxWSPcukZZdxPQ1Wgbhd9DSXhgkUnkEEETowyn8ufQFRnQHfc9Fn5DrJil</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
        <span class="s2">'I7vD+ZyRU3gZoBj2GVMQuxJLqQEHy2XsJ6ZWTea/EfK93XfDyY7ZxyeK0ZdWCVoT</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
        <span class="s2">'qw9QNJSkGjesCBkcY4Rjxi9LbLJwW3Es4wgW4N4YcltfygjltSis+RVKJyGeDqTW</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
        <span class="s2">'Axceih3mlkdGIQIDAQABoxowGDAWBgNVHREEDzANggsqLm5vZGUuc3BkeTALBgkq</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
        <span class="s2">'hkiG9w0BAQsDggEBALn2FQSDMsyu+oqUnJgTVdGpnzKmfXoBPlQuznRdibri8ABO</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
        <span class="s2">'kOo8FC72Iy6leVSsB26KtAdhpURZ3mv1Oyt4cGeeyQln2Olzp5flIos+GqYSztAq</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
        <span class="s2">'5ZnrzTLLlip7KHkmastYRXhEwTLmo2JCU8RkRP1X/m1xONF/YkURxmqj6cQTahPY</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
        <span class="s2">'FzzLP1clW3arJwPlUcKKby6WpxO5MihYEliheBr7fL2TDUA96eG+B/SKxvwaGF2v</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
        <span class="s2">'gWF8rg5prjPaLW8HH3Efq59AimFqUVQ4HtcJApjLJDYUKlvsMNMvBqh/pQRRPafj</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
        <span class="s2">'0Cp8dyS45sbZ2RgXdyfl6gNEj+DiPbaFliIuFmM=</span><span class="s5">\n</span><span class="s2">' </span><span class="s1">+</span>
        <span class="s2">'-----END CERTIFICATE-----'</span>
<span class="s1">}</span>

<span class="s3">function </span><span class="s1">expectData (stream</span><span class="s5">, </span><span class="s1">expected</span><span class="s5">, </span><span class="s1">callback) {</span>
  <span class="s3">var </span><span class="s1">actual = </span><span class="s2">''</span>

  <span class="s1">stream.on(</span><span class="s2">'data'</span><span class="s5">, </span><span class="s3">function </span><span class="s1">(chunk) {</span>
    <span class="s1">actual += chunk</span>
  <span class="s1">})</span>
  <span class="s1">stream.on(</span><span class="s2">'end'</span><span class="s5">, </span><span class="s3">function </span><span class="s1">() {</span>
    <span class="s1">assert.strictEqual(actual</span><span class="s5">, </span><span class="s1">expected)</span>
    <span class="s1">callback()</span>
  <span class="s1">})</span>
<span class="s1">}</span>
<span class="s1">exports.expectData = expectData</span>

<span class="s1">exports.everyProtocol = </span><span class="s3">function </span><span class="s1">everyProtocol (body) {</span>
  <span class="s3">var </span><span class="s1">protocols = [</span>
    <span class="s1">{ protocol: </span><span class="s2">'http2'</span><span class="s5">, </span><span class="s1">alpn: </span><span class="s2">'h2'</span><span class="s5">, </span><span class="s1">version: </span><span class="s4">4 </span><span class="s1">}</span><span class="s5">,</span>
    <span class="s1">{ protocol: </span><span class="s2">'spdy'</span><span class="s5">, </span><span class="s1">alpn: </span><span class="s2">'spdy/3.1'</span><span class="s5">, </span><span class="s1">version: </span><span class="s4">3.1 </span><span class="s1">}</span><span class="s5">,</span>
    <span class="s1">{ protocol: </span><span class="s2">'spdy'</span><span class="s5">, </span><span class="s1">alpn: </span><span class="s2">'spdy/3'</span><span class="s5">, </span><span class="s1">version: </span><span class="s4">3 </span><span class="s1">}</span><span class="s5">,</span>
    <span class="s1">{ protocol: </span><span class="s2">'spdy'</span><span class="s5">, </span><span class="s1">alpn: </span><span class="s2">'spdy/2'</span><span class="s5">, </span><span class="s1">version: </span><span class="s4">2 </span><span class="s1">}</span>
  <span class="s1">]</span>

  <span class="s1">protocols.forEach(</span><span class="s3">function </span><span class="s1">(protocol) {</span>
    <span class="s1">describe(protocol.alpn</span><span class="s5">, </span><span class="s3">function </span><span class="s1">() {</span>
      <span class="s1">body(protocol.protocol</span><span class="s5">, </span><span class="s1">protocol.alpn</span><span class="s5">, </span><span class="s1">protocol.version)</span>
    <span class="s1">})</span>
  <span class="s1">})</span>
<span class="s1">}</span>

<span class="s1">exports.everyConfig = </span><span class="s3">function </span><span class="s1">everyConfig (body) {</span>
  <span class="s1">exports.everyProtocol(</span><span class="s3">function </span><span class="s1">(protocol</span><span class="s5">, </span><span class="s1">alpn</span><span class="s5">, </span><span class="s1">version) {</span>
    <span class="s3">if </span><span class="s1">(alpn === </span><span class="s2">'spdy/2'</span><span class="s1">) {</span>
      <span class="s3">return</span>
    <span class="s1">}</span>

    <span class="s1">[</span><span class="s3">false</span><span class="s5">, </span><span class="s3">true</span><span class="s1">].forEach(</span><span class="s3">function </span><span class="s1">(plain) {</span>
      <span class="s1">describe(plain ? </span><span class="s2">'plain mode' </span><span class="s1">: </span><span class="s2">'ssl mode'</span><span class="s5">, </span><span class="s3">function </span><span class="s1">() {</span>
        <span class="s1">body(protocol</span><span class="s5">, </span><span class="s1">alpn</span><span class="s5">, </span><span class="s1">version</span><span class="s5">, </span><span class="s1">plain)</span>
      <span class="s1">})</span>
    <span class="s1">})</span>
  <span class="s1">})</span>
<span class="s1">}</span>
</pre>
</body>
</html>